# Магазин автозапчастей (курсовая) — Node.js + MySQL

Небольшой учебный проект интернет‑магазина автозапчастей: каталог с поиском и фильтрами, избранное, корзина, оформление заказа с адресом, профиль с историей и отслеживанием статуса. Администратор может менять статус заказа.

---

## Используемые технологии

- **Node.js + Express** — сервер, маршрутизация, обработка форм.
- **MySQL** — хранение данных (товары, пользователи, избранное, заказы).
- **mysql2 (promise)** — подключение к MySQL из Node.js.
- **EJS** — серверный рендер страниц (шаблоны).
- **express-session** — сессии (авторизация и корзина в сессии).
- **bcrypt** — безопасное хранение паролей (хэширование).
- **HTML/CSS (без фреймворков)** — простая, аккуратная верстка.

---

## Архитектура и файлы

### Корень проекта
- `schema.sql` — структура базы данных.
- `.env` — переменное окружение.
- `package.json` — зависимости и команды запуска.
- `scripts/seed.js` — заполнение базы начальными данными (категории, бренды, товары) + создание admin.

### Backend (`src/`)
- `src/app.js` — точка входа: Express, сессии, подключение роутов.
- `src/db.js` — пул подключений MySQL.
- `src/middleware/auth.js` — защита страниц для авторизованных пользователей.
- `src/middleware/admin.js` — защита админ‑части по роли `admin`.

#### Роуты (`src/routes/`)
- `auth.js` — регистрация, вход, выход.
- `catalog.js` — главная: поиск/фильтры/каталог; карточка товара.
- `favorites.js` — избранное: список, добавление/удаление.
- `cart.js` — корзина в сессии: добавление, обновление количества, удаление.
- `checkout.js` — оформление заказа (адрес + создание заказа).
- `profile.js` — профиль: данные пользователя + история заказов.
- `admin.js` — админ: список заказов + смена статуса.

### Frontend
- `src/views/layout.ejs` — базовый макет.
- `src/views/partials/header.ejs` — шапка (лого + ссылки).
- `src/views/partials/footer.ejs` — подвал.
- `src/views/pages/*.ejs` — страницы.
- `public/css/main.css` — стили (аккуратный минималистичный UI).

---

## Установка и запуск

### 1) Установить зависимости
```bash
npm i
```

### 2) Создание БД и таблицы
```bash
mysql -u root -p < schema.sql
```

### 3) Заполнение базы тестовыми данными
```bash
npm run seed
```

### 4) Запуск
```bash
npm run dev
```
Ссылка: `http://localhost:3000`

---

## Роли
- Обычный пользователь: регистрация на сайте.
- Администратор: создается сидером (`admin@local / admin123`), доступ к `/admin/orders`.

---
